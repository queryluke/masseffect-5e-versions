(window.webpackJsonp=window.webpackJsonp||[]).push([[31],{1024:function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var r={methods:{randomValue:function(e){return e[Math.floor(Math.random()*e.length)]}}}},1046:function(e,t,n){"use strict";n.r(t);var r=n(24),o=(n(8),n(60),n(52),n(1024)),c=(n(32),n(43),n(35),n(10),n(42),n(45),n(17)),l=(n(21),n(104),n(27),n(22),n(34),n(26),n(140)),h=n(257);n(37);function d(e,t){var n;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return m(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return m(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var i=0,r=function(){};return{s:r,n:function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}},e:function(e){throw e},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,c=!0,l=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return c=e.done,e},e:function(e){l=!0,o=e},f:function(){try{c||null==n.return||n.return()}finally{if(l)throw o}}}}function m(e,t){(null==t||t>e.length)&&(t=e.length);for(var i=0,n=new Array(t);i<t;i++)n[i]=e[i];return n}var f={methods:{setAbilityScores:function(){this.npc.abilityScores={str:1,dex:1,con:1,int:1,wis:1,cha:1};var e={adept:["wis","dex","cha"],engineer:["int","dex","con"],infiltrator:["dex","int","str"],sentinel:["wis","int","dex"],soldier:["dex","str","con"],vanguard:["str","wis","con"]};"asari"===this.options.species.id&&(e.adept=["cha","dex","wis"],e.sentinel=["cha","dex","int"],e.vanguard=["str","cha","con"]),"elcor"===this.options.species.id&&(e.adept=["cha","int","wis"],e.sentinel=["cha","int","str"],e.vanguard=["int","cha","con"],e.engineer=["int","con","str"],e.infiltrator=["int","str","con"],e.soldier=["int","str","con"]);var t=this.options.cr.normalized<=5?[12,11,10,10,9,8]:[15,14,13,12,10,8],n=e[this.options.klass.id];for(var r in this.npc.abilityScores)n.includes(r)?this.npc.abilityScores[r]=t[n.indexOf(r)]:this.npc.abilityScores[r]=t[this.randomValue([3,4,5])];switch(this.options.species.id){case"human":for(var o in this.npc.abilityScores)this.npc.abilityScores[o]++;break;default:var c,l=d(this.options.species.abilityScoreIncrease);try{for(l.s();!(c=l.n()).done;){var h=c.value,m=parseInt(h.amount,10);this.npc.abilityScores[h.ability]+=m}}catch(e){l.e(e)}finally{l.f()}}this.npc.abilityScores.con+=-1*this.options.offensiveScale;var f=this.options.cr.attack+(this.options.offensiveScale<=0?this.options.offensiveScale:0),v=this.options.cr.attack+(this.options.offensiveScale<=0?0:this.options.offensiveScale);v>19&&(v=19);var y=this.abilityScoreBonus(this.npc.abilityScores[n[0]])+this.options.cr.profBonus;if(y>v){var w=2*(y-v);for(var k in this.npc.abilityScores)this.npc.abilityScores[k]>10&&(this.npc.abilityScores[k]-=w)}else if(y<f){var S,x=f-y,D=d(n);try{for(D.s();!(S=D.n()).done;){var T=S.value;this.npc.abilityScores[T]+2*x>30?this.npc.abilityScores[T]=30:this.npc.abilityScores[T]+=2*x}}catch(e){D.e(e)}finally{D.f()}for(var C in this.npc.abilityScores)n.includes(C)||(this.npc.abilityScores[C]+x>30?this.npc.abilityScores[C]=30:this.npc.abilityScores[C]+=x)}}}},v=(n(18),n(129)),y={computed:{ballisticBlades:function(){var e=this.tierDieCount(2,2);return{id:"ballistic-blades",damage:this.averageFromDie(12,e),type:"actions",entry:{attack:"ranged",hardRange:!0,proficient:!0,range:30,dc:!1,mod:"dex",damage:[{dieCount:e,dieType:12,type:"piercing",mod:!1}],target:"one",name:"Ballistic Blades",uses:1}}},beehive:function(){var e=this.tierDieCount(3,2);return{id:"beehive",damage:this.averageFromDie(6,e),type:"actions",entry:{name:"Beehive",uses:1,text:"The ".concat(this.lcName,' shoots shrapnel in a <me-distance length="15" adj /> cone. Each creature in the area must make a DC ').concat(this.calcDc("dex")," Dexterity saving throw, taking ").concat(this.damageString(e,6)," piercing damage, or half as much damage on a successful one.")}}},concussiveShot:function(){var e=this.tierDieCount(1,1);return{id:"concussive-shot",damage:this.averageFromDie(8,e),type:"features",entry:{name:"Concussive Shot",uses:3,text:"The ".concat(this.lcName," may activate concussive shot with a bonus action. The next ranged weapon attack that hits deals an additional ").concat(this.damageString(e,8)," bludgeoning damage and the must succeed on a DC ").concat(this.calcDc("dex"),' Strength saving throw or become <me-condition id="prone" />.')}}},flakCannon:function(){var e=this.tierDieCount(2,2);return{id:"flak-cannon",damage:this.averageFromDie(6,e),type:"actions",entry:{name:"Flak Cannon",uses:3,text:"The ".concat(this.lcName,' targets an area within <me-distance length="30" />. Each creature in a <me-distance length="10" adj />-radius sphere centered on the target must make a DC ').concat(this.calcDc("dex")," Dexterity saving throw, taking ").concat(this.damageString(e,6)," piercing damage, or half as much damage on a successful one.")}}},fortification:function(){return{id:"fortification",damage:0,type:"reactions",entry:{name:"Fortification",uses:1,text:"When the ".concat(this.lcName," is targeted by an attack it can see, it gains +5 AC until the start of its next turn.")}}},havocStrike:function(){var e=this.tierDieCount(2,2);return{id:"havoc-strike",damage:this.averageFromDie(8,e),type:"actions",entry:{name:"Havoc Strike",uses:2,text:"The ".concat(this.lcName,' moves to an unoccupied space within <me-distance length="20" />. Each creature within <me-distance length="5" adj /> from where its movement ends must make a DC ').concat(this.calcDc("str")," Dexterity saving throw, taking ").concat(this.damageString(e,8)," piercing damage, or half as much damage on a successful one.")}}},hawkMissileLauncher:function(){var e=this.tierDieCount(3,3);return{id:"havoc-strike",damage:this.averageFromDie(6,e),type:"actions",entry:{name:"Hawk Missile Launcher",uses:1,text:"The ".concat(this.lcName,' targets a creature or object it can see within <me-distance length="150" />. The target suffers ').concat(this.damageString(e,6)," thunder damage.")}}},hexShield:function(){return{id:"hex-shield",damage:0,type:"actions",entry:{name:"Hex Shield",uses:1,text:"The ".concat(this.lcName,' creates a free-standing shield with 5 AC and 50 shield points within <me-distance length="5" />. The shield provides full cover until it has no shield points remaining.')}}},nightshadeBlades:function(){var e=this.tierDieCount(1,2);return{id:"nightshade-blades",damage:this.averageFromDie(12,e),type:"actions",entry:{attack:"ranged",hardRange:!0,proficient:!0,range:30,dc:!1,mod:"dex",damage:[{dieCount:e,dieType:12,type:"poison",mod:!1}],hit:"The target must succeed on a DC ".concat(8+this.npc.profBonus,' Constitution saving throw or become <me-condition id="poisoned" /> until it finishes a short rest'),target:"one",name:"Nightshade Blades",uses:3}}},stimulantPack:function(){return{id:"stimulant-pack",damage:0,type:"features",entry:{name:"Stimulant Pack",uses:1,text:"As a bonus action, the ".concat(this.lcName," adds 1d4 to its attack rolls and saving throws for the next minute.")}}},trophySystem:function(){return{id:"trophy-system",damage:0,type:"reactions",entry:{name:"Trophy System",uses:1,text:'When a grenade or missile from a heavy weapon comes within <me-distance length="15" /> of the '.concat(this.lcName,", it may choose to detonate it immediately. If the detonate would cause the ").concat(this.lcName," to make a Dexterity saving throw, it has advantage on the roll.")}}}},methods:{tierDieCount:function(e,t){return e+t*(this.metaTier-1)},damageString:function(e,t){return"".concat(this.averageFromDie(t,e)," (").concat(e,"d").concat(t,")")},setCombatPowers:function(){var e=this,t="soldier"===this.options.klass.id?Math.ceil(this.metaLevel/4):Math.ceil(this.metaLevel/8),n=this.randomValue(Object(c.a)(Array(t+1).keys())),r=this.$store.getters.getData("powers").filter((function(i){return"combat"===i.type&&i.classes.includes(e.options.klass.id)&&e.combatPower(i.id)})),o=[];if(r.length>0)for(var i=0;i<n;i++){var l=r.filter((function(i){var t=e.combatPower(i.id),n="concussive-shot"===i.id?"bonus":"combat";return!o.includes(i.id)&&e.isDamageAddable({type:n,damage:t.damage,uses:t.entry.uses})}));if(l.length>0){var option=this.randomValue(l),h=this.combatPower(option.id),d="concussive-shot"===h.id?"bonus":"combat";this.npc.entries[h.type].push(h.entry),this.addDamage({type:d,damage:h.damage,uses:h.entry.uses}),o.push(option.id)}}},combatPower:function(e){return this[Object(v.camelCase)(e)]||!1}}},w=n(30),k=(n(33),n(39),n(64),{methods:{barrier:function(){var e=this.progression.find((function(i){return"barrier_ticks"===i.label})).values[this.metaLevel-1],t=Math.floor(4.5*e);this.isHpBonusAddable(t)&&(this.npc.entries.features.push({name:"Barrier",uses:this.progression.find((function(i){return"barrier_uses"===i.label})).values[this.metaLevel-1],perDay:!0,text:"As an action or bonus action, the ".concat(this.options.klass.id," gains ").concat(e," barrier ticks. When the ").concat(this.options.klass.id," is dealt damage, remove one barrier tick and reduce the damage by 1d8."),id:"barrier"}),this.healthBonus+=t)},drone:function(){var e=2*this.metaTier,t={type:"bonus",damage:2,uses:5};if(this.isHpBonusAddable(e)&&this.isDamageAddable(t)){this.npc.entries.actions.push({name:"Summon Drone",uses:this.metaTier,perDay:!0,text:"The ".concat(this.lcName," summons a ").concat(this.randomValue(["assault","combat","defense","disruption","recon","rocket"]),' drone in a unoccupied space within <me-distance length="30" />.'),id:"summonDrone"}),this.healthBonus+=5*this.metaTier,this.addDamage(t)}},tacticalCloak:function(){var e=this.progression.find((function(i){return"tactical_cloak_uses"===i.label})).values[this.metaLevel-1],t=5*e;this.isHpBonusAddable(t)&&(this.npc.entries.features.push({name:"Tactical Cloak",uses:e,perDay:!0,text:"As a bonus action, the ".concat(this.lcName," may cast Tactical Cloak, becoming invisible. When it makes an attack roll, casts a power, or users a grenade or heavy weapon, tactical cloak ends."),id:"tacticalCloak"}),this.healthBonus+=10*e)},sneakAttack:function(){var e=this.progression.find((function(i){return"sneak_attack_damage"===i.label})).values[this.metaLevel-1],t=e.split("d"),n=Object(w.a)(t,2),r=n[0],o=n[1],c=Math.floor(this.averageFromDie(o,r)),l={type:"bonus",damage:c,uses:5};this.isDamageAddable(l)&&(this.npc.entries.features.push({name:"Sneak Attack",uses:1,perTurn:!0,text:"The ".concat(this.lcName," deals an extra ").concat(c," (").concat(e,') damage when it hits a target with a weapon attack and has advantage on the attack roll,\n                or when the target is within <me-distance length="5" /> of an ally of the ').concat(this.lcName," that isn't incapacitated and the infiltrator doesn't have disadvantage on the attack roll."),id:"sneakAttack"}),this.addDamage(l))},techArmor:function(){var e=2*(this.metaLevel+this.abilityScoreBonus(this.npc.abilityScores.cha));this.isHpBonusAddable(2*e)&&(this.npc.entries.features.push({name:"Tech Armor",uses:2,perDay:!0,text:"As a bonus action, the ".concat(this.lcName," can activate its Tech Armor. It immediately gains ").concat(e," temporary hit points. Any damage is dealt to these temporary hit points first."),id:"techArmor"}),this.healthBonus+=2*e)},setFeatures:function(){switch(this.klass.id){case"sentinel":this.barrier(),this.techArmor();break;case"infiltrator":this.tacticalCloak(),this.sneakAttack();break;case"adept":case"vanguard":this.barrier();break;case"engineer":this.drone()}}}}),S=(n(53),{methods:{setId:function(){this.npc.id="generated-".concat(this.npc.name.replace("-","-").toLowerCase(),"-").concat(Date.now())}}}),x=(n(12),n(338),n(339),n(340),n(341),n(342),n(343),n(344),n(345),n(346),n(347),n(348),n(349),n(350),n(351),n(352),n(353),n(354),{data:function(){return{resistances:{0:[0,0,0,0,0,0,0,0],1:[0,0,0,0,0,1,1,1],2:[0,0,0,1,1,1,2,2],3:[0,1,1,1,2,2,2,2],4:[1,1,1,2,2,2,3,3],5:[2,2,2,2,3,3,3,3],6:[2,2,2,3,3,3,3,3]},immunities:{0:[0,0,0,0,0,0,0,0],1:[0,0,0,0,0,0,1,1],2:[0,0,0,0,1,1,1,1],3:[0,0,1,1,1,1,2,2],4:[1,1,1,1,2,2,2,2],5:[1,1,2,2,2,2,3,3],6:[2,2,2,2,3,3,3,3]},vulnerabilities:{0:[0,0,0,0,0,0,0,0,1,1,1],1:[0,0,0,0,0,0,1,1,1,1,2],2:[0,0,0,1,1,1,1,2,2,2,2]}}},methods:{setIrvs:function(){var e=["acid","cold","fire","force","lightning","necrotic","poison","psychic","radiant","thunder"],t={conImm:[],damImm:[],res:[],vul:[]};if(this.options.offensiveScale<=0&&(-2===this.options.offensiveScale&&e.push("piercing","slashing","bludgeoning"),t.conImm=this.applyRandomRiv(this.immunities[this.defensiveCrMeta],["blinded","charmed","deafened","frightened","grappled","lifted","paralyzed","poisoned","primed","prone","restrained","stunned"]),t.res=this.applyRandomRiv(this.resistances[this.defensiveCrMeta],e)),this.options.offensiveScale>=0){var n=e.filter((function(i){return!t.damImm.includes(i)&&!t.res.includes(i)}));t.vul=t.vul.concat(this.applyRandomRiv(this.vulnerabilities[this.options.offensiveScale],n))}for(var i in t)0===t[i].length&&delete t[i];this.npc.irv=0!==Object.keys(t).length&&t},applyRandomRiv:function(e,t){for(var n=[],r=this.randomValue(e),i=1;i<=r;i++)n.push(this.randomValue(t));return Object(c.a)(new Set(n))}}});n(63);function D(e,t){var n;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return T(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return T(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var i=0,r=function(){};return{s:r,n:function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}},e:function(e){throw e},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,c=!0,l=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return c=e.done,e},e:function(e){l=!0,o=e},f:function(){try{c||null==n.return||n.return()}finally{if(l)throw o}}}}function T(e,t){(null==t||t>e.length)&&(t=e.length);for(var i=0,n=new Array(t);i<t;i++)n[i]=e[i];return n}var C={methods:{setSavingThrows:function(){this.npc.savingThrows=[];var e,t=this.randomValue(this.savingThrowWeights[this.defensiveCrMeta]),n=this.savingThrows.slice(),r=D(this.options.klass.profs.savingThrow.has.slice());try{for(r.s();!(e=r.n()).done;){var o=e.value;t>0&&(n.splice(n.indexOf(o),1),this.npc.savingThrows.push(o),t--)}}catch(e){r.e(e)}finally{r.f()}for(var i=1;i<=t;i++){var c=this.randomValue(n);n.splice(n.indexOf(c),1),this.npc.savingThrows.push(c)}}},data:function(){return{savingThrowWeights:{0:[0,1,1,2],1:[1,1,2,2],2:[1,2,2,3],3:[2,2,3,3],4:[2,3,3,4],5:[3,3,4,4],6:[3,4,4,5]},savingThrows:["str","dex","con","int","wis","cha"]}}},A={computed:{skills:function(){return this.$store.getters.getData("skills")}},methods:{setSkills:function(){this.npc.skills=[];for(var e=this.options.klass.profs.skill.choices.items.slice(),t=this.skills.filter((function(t){return e.includes(t.id)})),n=this.randomValue([1,1,1,2,2,2,2,3,3]),i=1;i<=n;i++){var r=this.randomValue(t);this.npc.skills.push(r.id)}this.npc.skills=Object(c.a)(new Set(this.npc.skills))}}},O=n(2);n(15),n(13),n(16);function N(object,e){var t=Object.keys(object);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(object);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(object,e).enumerable}))),t.push.apply(t,n)}return t}var j={data:function(){return{powerLevelDamage:{0:4,1:9,2:16,3:34,4:40,5:44,6:50}}},computed:{powers:function(){var e=this;return this.$store.getters.getData("powers").filter((function(i){return i.classes.includes(e.options.klass.id)&&"combat"!==i.type}))}},methods:{getCantrips:function(e){var t=this,n="vanguard"===this.options.klass.id?Math.ceil(e/8):Math.ceil(e/4);n=0===n?1:n;for(var r=this.powers.filter((function(i){return 0===i.level})).map((function(i){var e=0;return i.damage&&(e=t.averageFromDie(i.damage.dieType,i.damage.dieCount)),{dmgObject:{type:"power",damage:e,uses:5},power:i}})),i=0,o=[];i<n;){var c=r.filter((function(i){return!o.includes(i.power.id)&&t.isDamageAddable(i.dmgObject)}));if(c.length>0){var option=this.randomValue(c);o.push(option.power.id),this.addDamage(option.dmgObject)}i++}return o},techCasterInfo:function(e){for(var t=this,n=this.klass.progression.columns.find((function(i){return"tech_points"===i.label})).values[e-1],r=this.klass.progression.columns.find((function(i){return"tech_point_limit"===i.label})).values[e-1],o=this.powers.map((function(i){var e=0,o=Math.floor(n/r);if(i.damage){var c=0;i.damage.higherLevel&&(c=i.damage.higherLevel.dieCount*(r-i.level)),e=t.averageFromDie(i.damage.dieType,i.damage.dieCount+c)}return{dmgObject:{type:"power",damage:e,uses:o},power:i}})),c=this.numPowers(e),l=0,h=[],d="powers"===this.options.damageFocus;l<c;){var m=o.filter((function(i){return i.power.level<=r&&!h.includes(i.power.id)&&t.isDamageAddable(i.dmgObject)&&(0!==l||1===i.power.level)&&(!d||i.power.damage)}));if(m.length>0){var option=this.randomValue(m);h.push(option.power.id),this.addDamage(option.dmgObject),l++}else 0!==m.length||d?d=!1:l++}return{list:h,tech:{points:n,limit:r}}},bioticCasterInfo:function(e){for(var t=this,n=this.klass.progression.columns.find((function(i){return"power_slots_by_power_level"===i.label})).values.filter((function(i){return i[e-1]>0})).map((function(i){return i[e-1]})),r=n.length,o=this.powers.map((function(i){var e=0;if(i.damage){var r=0,o=0,c=i.damage.higherLevel?i.damage.higherLevel.dieCount:0,l=JSON.parse(JSON.stringify(n)).reverse();for(var h in l)if(!(r>5)){var d=l.length-parseInt(h),m=l[h],f=m+r>5?5-r:m;o+=f*t.averageFromDie(i.damage.dieType,i.damage.dieCount+c*(d-i.level)),r+=f}e=Math.floor(o/5)}return{dmgObject:{type:"power",damage:e,uses:5,id:i.id},power:i}})),c=this.numPowers(e),l=0,h=[],d="powers"===this.options.damageFocus;l<c;){var m=o.filter((function(i){return i.power.level<=r&&i.power.level>0&&!h.includes(i.power.id)&&t.isDamageAddable(i.dmgObject)&&(0!==l||1===i.power.level)&&(!d||i.power.damage)}));if(m.length>0){var option=this.randomValue(m);h.push(option.power.id),this.addDamage(option.dmgObject),l++}else 0!==m.length||d?d=!1:l++}return{list:h}},pactCasterInfo:function(e){for(var t=this,n=this.klass.progression.columns.find((function(i){return"power_slots"===i.label})).values[e-1],r=this.klass.progression.columns.find((function(i){return"power_level"===i.label})).values[e-1],o=this.powers.map((function(i){var e=0;if(i.damage){var o=0;i.damage.higherLevel&&(o=i.damage.higherLevel.dieCount*(r-i.level)),e=t.averageFromDie(i.damage.dieType,i.damage.dieCount+o)}return{dmgObject:{type:"power",damage:e,uses:Math.ceil(n/2)},power:i}})),c=this.numPowers(e),l=0,h=[],d="powers"===this.options.damageFocus;l<c;){var m=o.filter((function(i){return i.power.level<=r&&i.power.level>0&&!h.includes(i.power.id)&&t.isDamageAddable(i.dmgObject)&&(0!==l||1===i.power.level)&&(!d||i.power.damage)}));if(m.length>0){var option=this.randomValue(m);h.push(option.power.id),this.addDamage(option.dmgObject),l++}else 0!==m.length||d?d=!1:l++}return{list:h,pact:{numSlots:n,maxLevel:r}}},numPowers:function(e){var t=["adept","engineer"].includes(this.options.klass.id)?"adept":"vanguard",n=this.$store.getters.getItem("classes",t).progression.columns.find((function(i){return"power_slots_by_power_level"===i.label})).values.map((function(i){return i[e-1]>0?Math.ceil(i[e-1]/2):0})).reduce((function(e,t){return e+t}),0);return"vanguard"===this.options.klass.id?n:0===n?1:n},setPowercasting:function(){if("soldier"!==this.options.klass.id){var e,t,n,r=this.randomValue(Object(c.a)(Array(this.metaLevel).keys()).reverse().slice(0,"powers"===this.options.damageFocus?3:7))+1;switch(this.options.klass.id){case"engineer":case"infiltrator":e=this.techCasterInfo(r),t="The ".concat(this.npc.name.toLowerCase()," has ").concat(e.tech.points," tech points, from which it can cast the following powers:"),n="int";break;case"adept":case"vanguard":(e=this.bioticCasterInfo(r)).list=e.list.concat(this.getCantrips(r)),"vanguard"===this.options.klass.id&&(e.half=!0),t="The ".concat(this.npc.name.toLowerCase()," has the following powers:"),n="asari"===this.options.species.id?"cha":"wis";break;case"sentinel":(e=this.pactCasterInfo(r)).list=e.list.concat(this.getCantrips(r)),t="It regains its expended power slots when it finishes a short or long rest. It knows the following powers:",n="cha"}var o=this.abilityScoreBonus(this.npc.abilityScores[n])+this.npc.profBonus,l=8+o;this.npc.entries.features.push(function(e){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?N(Object(source),!0).forEach((function(t){Object(O.a)(e,t,source[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(source)):N(Object(source)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(source,t))}))}return e}({name:"Powercasting",casterLevel:r,mod:n,text:"The ".concat(this.npc.name.toLowerCase()," is a ").concat(this.$i18n.t("ordinal_numbers[".concat(r,"]"),"en"),"-level powercaster.\n               Its powercasting ability is ").concat(this.$i18n.t("abilities.".concat(n,".title"),"en"),"\n               (power save DC ").concat(l,", +").concat(o," to hit with powers). ").concat(t),id:"powercasting"},e))}}}},I={methods:{setTraits:function(){this.options.traits&&this[this.options.species.id]&&this[this.options.species.id]()},angara:function(){var e={type:"power",damage:3,uses:5};this.isDamageAddable(e)&&(this.npc.entries.features.push({mod:"cha",list:[{id:"shocking-grasp",perDay:"at_will"}],name:"Bio-Electric Focus",text:"The ".concat(this.lcName,"'s innate powercasting ability is Charisma (power save DC ").concat(this.calcDc("cha"),", +").concat(this.npc.profBonus+this.abilityScoreBonus(this.npc.abilityScores.cha)," to hit with power attacks). It can innately cast the following at 1st level:"),id:"innate-powercasting"}),this.addDamage(e)),this.npc.ac+=1,this.npc.irv||(this.npc.irv={}),this.npc.irv.res?this.npc.irv.res.includes("lightning")||this.npc.irv.res.push("lightning"):this.npc.irv.res=["lightning"],this.npc.entries.features.push({name:"Bio-electric Ward",text:"The ".concat(this.lcName,"'s lightening resistance does not apply to its shields."),id:"bio-electric-ward"}),this.npc.entries.features.push({name:"Solar Dependency",text:"If the ".concat(this.lcName," fails to immerse itself in sunlight for at least 1 hour during a day, it suffers one level of exhaustion."),id:"solar-dependency"}),this.npc.skills||(this.npc.skills=[]),this.npc.skills.includes("survival")||this.npc.skills.push("survival")},asari:function(){var e=this;["engineer","infiltrator","soldier"].includes(this.options.klass.id)&&function(){for(var t=e.$store.getters.getData("powers").filter((function(i){return i.classes.includes("adept")})).filter((function(i){return 0===i.level||1===i.level})).map((function(i){var t=0;return i.damage&&(t=e.averageFromDie(i.damage.dieType,i.damage.dieCount)),{dmgObject:{type:"power",damage:t,uses:0===i.level?5:1},power:i}})),n=[],i=0;i<2;i++){var r=t.filter((function(t){return!n.map((function(e){return e.id})).includes(t.power.id)&&e.isDamageAddable(t.dmgObject)&&0===t.power.level}));if(r.length>0){var o=e.randomValue(r);n.push({id:o.power.id,perDay:"at_will"}),e.addDamage(o.dmgObject)}}var c=t.filter((function(i){return 1===i.power.level&&e.isDamageAddable(i.dmgObject)}));if(c.length>0){var l=e.randomValue(c);n.push({id:l.power.id,perDay:1})}e.npc.entries.features.push({mod:"cha",list:n,name:"Innate Biotics",text:"The ".concat(e.lcName,"'s innate powercasting ability is Charisma (power save DC ").concat(e.calcDc("cha"),", +").concat(e.npc.profBonus+e.abilityScoreBonus(e.npc.abilityScores.cha)," to hit with power attacks). It can innately cast the following:"),id:"innate-powercasting"})}(),this.npc.entries.features.push({name:"Mind Meld",text:"The ".concat(this.lcName," can transfer and receive thoughts from a willing, intelligent creature. If the creature is unwilling, the thoughts become jumbled and disjointed."),id:"mind-meld"}),this.npc.skills||(this.npc.skills=[]),this.npc.skills.includes("persuasion")||this.npc.skills.push("persuasion")},batarian:function(){this.npc.skills||(this.npc.skills=[]),this.npc.skills.includes("perception")||this.npc.skills.push("perception"),this.npc.skills.includes("insight")||this.npc.skills.includes("intimidation")?this.npc.skills.includes("insight")&&!this.npc.skills.includes("intimidation")?this.npc.skills.push("intimidation"):!this.npc.skills.includes("insight")&&this.npc.skills.includes("intimidation")&&this.npc.skills.push("insight"):this.npc.skills.push(this.randomValue(["insight","intimidation"])),this.npc.entries.features.push({name:"Four Eyes",text:"The ".concat(this.lcName," can perform the Search action as a bonus action on each of its turns."),id:"four-eyes"}),this.npc.entries.features.push({name:"Saving Face",recharge:"short",text:"When the ".concat(this.lcName," misses with and attack roll or fails an ability check or saving throw, it may gain a bonus to the roll equal to the number of allies it can see (maximum +5)."),id:"saving-face"})},drell:function(){var e=this;this.npc.skills||(this.npc.skills=[]);var t=["athletics","perception","stealth","survival"].filter((function(i){return!e.npc.skills.includes(i)}));if(t.length>0)for(var i=0;i<(t.length>2?2:t.length);i++)this.npc.skills.push(this.randomValue(t.filter((function(i){return!e.npc.skills.includes(i)}))));this.npc.entries.features.push({name:"Raw Agility",text:"When the ".concat(this.lcName," moves on its turn in combat, it can double its speed until the end of the turn. Once it uses this ability, the ").concat(this.lcName,' can\'t use it again until it moves <me-distance length="0" override="0 {metric}"/> on one of its turns.'),id:"raw-agility"})},elcor:function(){this.npc.entries.features.push({name:"Careful",text:"The ".concat(this.lcName," has disadvantage on initiative rolls."),id:"careful"}),this.npc.skills||(this.npc.skills=[]),this.npc.skills.includes("perception")||this.npc.skills.push("perception"),this.npc.skills.includes("insight")||this.npc.skills.push("insight"),this.npc.ac+=2},geth:function(){this.npc.entries.actions.push({name:"Hunter Mode",recharge:"long",text:"The ".concat(this.lcName,'\'s movement speed increases by <me-distance length="5" /> and gains a +1 bonus to weapon attack rolls for 1 minute.'),id:"hunter-mode"}),this.npc.ac+=this.randomValue([1,2,3]),this.npc.irv||(this.npc.irv={}),this.npc.irv.damImm=["poison","psychic"],this.npc.irv.conImm?this.npc.irv.conImm.includes("poisoned")||this.npc.irv.conImm.push("poisoned"):this.npc.irv.conImm=["poisoned"];var e=Math.ceil(this.npc.profBonus/2);this.isHpBonusAddable(e/2*4.5)&&(this.npc.entries.actions.push({name:"Repair Matrix",uses:e,perDay:!0,text:"The ".concat(this.lcName," regains 1d8 hit points."),id:"repair-matrix"}),this.healthBonus+=e/2*4.5)},hanar:function(){this.npc.abilityScores.con-=1,this.npc.entries.features.push({name:"Amphibious",text:"The ".concat(this.lcName," can breathe both air and water."),id:"amphibious"}),this.npc.entries.features.push({name:"Bioluminescence",text:"The ".concat(this.lcName,' can shed dim light in a <me-distance length="30" /> radius.'),id:"bioluminescence"}),this.npc.speed.swim=30,this.npc.entries.features.push({name:"Contra-gravitic Levitation",text:"When the ".concat(this.lcName," suffers a critical hit, roll a d20. On a roll of 1 or 2, its contra-gravitic levitation device fails and its walking speed becomes 0. It can use its Action to make a DC 15 Intelligence (Engineering) check to repair the device."),id:"contra-gravitic-levitation"}),this.npc.entries.actions.push({attack:"melee",proficient:!0,range:5,dc:!1,mod:"str",damage:[{dieCount:1,dieType:6,mod:!0,type:"bludgeoning"}],target:"one",name:"Tentacles",hit:"The target must succeed on a DC ".concat(this.options.cr.dc,' Strength saving throw or be <me-condition id="grappled" />. The ').concat(this.lcName," can have up to six targets grappled at once"),id:"tentacles"}),this.npc.entries.actions.push({name:"Secrete Toxin",text:"One creature that is grappled by the ".concat(this.lcName," must make a DC ").concat(this.options.cr.dc,' Constitution saving throw or become <me-condition id="poisoned"/> for 1 hour.'),id:"toxin"})},krogan:function(){30!==this.npc.abilityScores.con&&(this.npc.abilityScores.con+=1);var e=this.abilityScoreBonus(this.npc.abilityScores.con)>0?this.abilityScoreBonus(this.npc.abilityScores.con):1;this.npc.entries.features.push({name:"Blood Rage",text:"When the ".concat(this.lcName," reduces an enemy's hit points to 0, it may enter a blood range gaining ").concat(e," temporary hit point").concat(e>1?"s":""," at the start of each of its turns and is immune to being charmed or frightened. Additionally, it cannot concentrate on powers. This effect lasts 1 minute and it loses any remaining temporary hit points when blood rage ends."),id:"blood-rage"}),this.npc.skills||(this.npc.skills=[]),this.npc.skills.includes("intimidation")||this.npc.skills.push("intimidation")},prothean:function(){this.npc.skills||(this.npc.skills=[]),this.npc.skills.includes("perception")||this.npc.skills.push("perception"),this.npc.senses||(this.npc.senses={}),this.npc.senses.truesight=30,this.npc.irv||(this.npc.irv={}),this.npc.irv.res=Object(c.a)(new Set((this.npc.irv.res||[]).concat(["cold","radiant"])))},quarian:function(){var e,t=this;switch(this.npc.irv||(this.npc.irv={}),this.npc.irv.res=Object(c.a)(new Set((this.npc.irv.res||[]).concat(["necrotic","poison"]))),this.npc.entries.features.push({name:"Hermetic Suit",text:"When the ".concat(this.lcName," suffers a critical hit that deals piercing or slashing damage, it suffers 1 level of exhaustion every hour until it patches its suit. It may patch its suit using an action and expending an omni-gel."),id:"hermetic-suit"}),this.randomValue(["cerebral","muscular","ocular","visceral"])){case"cerebral":30!==this.npc.abilityScores.int&&(this.npc.abilityScores.int+=1),this.npc.entries.features.push({name:"Mind Shielding Unit",text:"The ".concat(this.lcName," has advantage on saving throws against being charmed, frightened, or if an effect would cause it to become confused, compelled or put to sleep. Its mind cannot be read by an asari's mind meld."),id:"mind-shielding-unit"}),this.npc.skills||(this.npc.skills=[]),(e=["electronics","engineering","investigation","science"].filter((function(i){return!t.npc.skills.includes(i)}))).length>0&&this.npc.skills.push(this.randomValue(e));break;case"muscular":30!==this.npc.abilityScores.dex&&(this.npc.abilityScores.dex+=1),this.npc.entries.features.push({name:"Overclock Unit",text:"When the ".concat(this.lcName," moves on its turn in combat, it can double its speed until the end of the turn. Once it uses this ability, the ").concat(this.lcName,' can\'t use it again until it moves <me-distance length="0" override="0 {metric}"/> on one of its turns.'),id:"overclock-unit"}),(e=["athletics","acrobatics"].filter((function(i){return!t.npc.skills.includes(i)}))).length>0&&this.npc.skills.push(this.randomValue(e));break;case"ocular":this.npc.senses||(this.npc.senses={}),this.npc.senses.darkvision=60,this.npc.entries.features.push({name:"Clarity Unit",text:"The ".concat(this.lcName," has advantage on saving throws against being blinded."),id:"clarity-unit"}),this.npc.entries.features.push({name:"Keen Eyesight",text:"The ".concat(this.lcName,' has advantage on Wisdom (Perception) checks that rely on sight. Additionally, it can see in an area within <me-distance length="30" /> that is lightly obscured as if it were unobscured and can see in an area within <me-distance length="15" /> that is heavily obscured as if it were lightly obscured.'),id:"keen-eyesight"});break;case"visceral":this.npc.abilityScores.con<=28&&(this.npc.abilityScores.con+=2),this.npc.entries.features.push({name:"Revival Unit",recharge:"long",text:"The first time the ".concat(this.lcName," drops to 0 hit points, it drops to 1 hit point instead."),id:"revival-unit"})}},salarian:function(){var e=this;this.npc.entries.features.push({name:"Amphibious",text:"The ".concat(this.lcName," can breathe both air and water."),id:"amphibious"}),this.npc.skills||(this.npc.skills=[]);for(var i=0;i<2;i++){var t=this.skills.filter((function(i){return!e.npc.skills.includes(i.id)}));t.length>0&&this.npc.skills.push(this.randomValue(t).id)}},turian:function(){this.npc.entries.features.push({name:"Esprit De Corps",text:"The ".concat(this.lcName,' has advantage on attack rolls against a creature if at least one of its allies is within <me-distance length="5" /> of the creature and the ally isn\'t incapacitated.'),id:"esprit-de-corps"}),this.npc.skills||(this.npc.skills=[]),this.npc.skills.includes("athletics")||this.npc.skills.push("athletics"),this.npc.irv||(this.npc.irv={}),this.npc.irv.res=Object(c.a)(new Set((this.npc.irv.res||[]).concat(["radiant"])))},volus:function(){this.npc.entries.features.push({name:"Fury of the Small",recharge:"long",text:"When the ".concat(this.lcName," deals damage to a creature that is one size larger than itself, it may deal an extra ").concat(this.metaLevel," damage."),id:"fury-of-the-small"}),this.npc.entries.features.push({name:"Lucky",uses:3,perDay:!0,text:"The ".concat(this.lcName," gains advantage on an attack roll, saving throw, or ability check. The ").concat(this.lcName," can also cause disadvantage on an attack roll that targets it."),id:"lucky"}),this.npc.entries.features.push({name:"Hermetic Suit",text:"When the ".concat(this.lcName," suffers a critical hit that deals piercing or slashing damage, it takes 7 (2d6) poison and 3 (1d6) slashing damage at the end of each of its turns until the suit is patched. It may patch its suit using an action and expending an omni-gel."),id:"hermetic-suit"}),this.npc.irv||(this.npc.irv={}),this.npc.irv.res=Object(c.a)(new Set((this.npc.irv.res||[]).concat(["necrotic","poison"]))),this.npc.skills||(this.npc.skills=[]),this.npc.skills.includes("persuasion")||this.npc.skills.push("persuasion")},vorcha:function(){this.npc.entries.features.push({name:"Non-Differentiated Cells",text:"The ".concat(this.lcName," has advantage on saving throws that would cause it to become poisoned."),id:"non-differentiated-cells"}),this.npc.irv||(this.npc.irv={}),this.npc.irv.res=Object(c.a)(new Set((this.npc.irv.res||[]).concat(["poison"]))),this.npc.entries.actions.push({attack:"melee",proficient:!0,range:5,dc:!1,mod:"str",damage:[{dieCount:1,dieType:6,mod:!0,type:"piercing"}],target:"one",name:"Bite",id:"bite"});switch(this.randomValue(["aquatic","desert","frozen","highGravity","underground","volcanic","zeroGravity"])){case"aquatic":this.npc.entries.features.push({name:"Amphibious",text:"The ".concat(this.lcName," can breathe both air and water."),id:"amphibious"}),this.npc.speed.swim=30;break;case"desert":30!==this.npc.abilityScores.con&&(this.npc.abilityScores.con+=1);break;case"frozen":this.npc.irv.res=Object(c.a)(new Set((this.npc.irv.res||[]).concat(["cold"])));break;case"highGravity":30!==this.npc.abilityScores.str&&(this.npc.abilityScores.str+=1);break;case"underground":this.npc.senses||(this.npc.senses={}),this.npc.senses.darkvision=60,this.npc.senses.blindsight=30;break;case"volcanic":this.npc.irv.res=Object(c.a)(new Set((this.npc.irv.res||[]).concat(["fire"])));break;case"zeroGravity":this.npc.entries.features.push({name:"Zero-g Aptitude",text:"When ".concat(this.lcName,' is <me-condition id="lifted" /> its movement speed is <me-distance length="5" /> and it does not have disadvantage on attack rolls.'),id:"0g-aptitude"})}}}};function M(e,t){var n;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return B(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return B(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var i=0,r=function(){};return{s:r,n:function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}},e:function(e){throw e},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,c=!0,l=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return c=e.done,e},e:function(e){l=!0,o=e},f:function(){try{c||null==n.return||n.return()}finally{if(l)throw o}}}}function B(e,t){(null==t||t>e.length)&&(t=e.length);for(var i=0,n=new Array(t);i<t;i++)n[i]=e[i];return n}var V={computed:{maxGrenadeTier:function(){return["I","II","III","IV","V","VI","VII","VIII","IX","X"].slice(0,Math.floor(this.metaLevel/2)+1)},grenadeOptions:function(){var e,t=[],n=M(this.$store.getters.getData("gear").filter((function(i){return"grenade"===i.type})));try{for(n.s();!(e=n.n()).done;){var g=e.value;if(g.mechanics&&g.mechanics.marks){var r,o=M(g.mechanics.marks);try{for(o.s();!(r=o.n()).done;){var c=r.value;if(this.maxGrenadeTier.includes(c.mark))for(var i=1;i<=this.metaTier;i++){var l=0;if(c.damage){var h=c.damage.split("d"),d=Object(w.a)(h,2),m=d[0],f=d[1];l=Math.floor(this.averageFromDie(f,m)*i)}t.push({id:"".concat(g.id,"-").concat(c.mark),entry:{id:g.id,mark:c.mark.toLowerCase(),uses:i},damage:l})}}}catch(e){o.e(e)}finally{o.f()}}else for(var v=1;v<=this.metaTier;v++)t.push({id:g.id,entry:{id:g.id,uses:v},damage:0})}}catch(e){n.e(e)}finally{n.f()}return t}},methods:{setGrenades:function(){var e=this;this.options.grenades&&function(){for(var t=e.randomValue(Object(c.a)(Array(e.metaTier).keys()).map((function(i){return i+1}))),n=[],i=0;i<t;i++){var r=e.grenadeOptions.filter((function(i){return e.isDamageAddable({type:"grenade",damage:i.damage,uses:i.entry.uses})&&!n.map((function(e){return e.id})).includes(i.entry.id)}));if(r.length>0){r=r.sort((function(a,b){return b.damage-a.damage})).slice(0,10);var o=e.randomValue(r);n.push(o.entry),e.addDamage({type:"grenade",damage:o.damage,uses:o.entry.uses})}}e.npc.entries.features.push({list:n,name:"Grenades",text:"The ".concat(e.lcName," has the following grenades equipped. It can use a grenade as an action."),id:"grenades"})}()}}};function _(e,t){var n;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return F(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return F(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var i=0,r=function(){};return{s:r,n:function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}},e:function(e){throw e},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,c=!0,l=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return c=e.done,e},e:function(e){l=!0,o=e},f:function(){try{c||null==n.return||n.return()}finally{if(l)throw o}}}}function F(e,t){(null==t||t>e.length)&&(t=e.length);for(var i=0,n=new Array(t);i<t;i++)n[i]=e[i];return n}var P={data:function(){return{tierRarity:{1:["common"],2:["common","uncommon"],3:["common","uncommon","rare","very_rare"],4:["common","uncommon","rare","very_rare","spectre"]}}},computed:{weapons:function(){return this.$store.getters.getData("weapons")},attackOptions:function(){var e,t=this,n=this.weapons.filter((function(i){return t.tierRarity[t.metaTier].includes(i.rarity)&&("hanar"!==t.options.species.id||i.properties.includes("light"))})).map((function(e){return t.setWeaponDamage(e)})),r=[],o=_(n);try{for(o.s();!(e=o.n()).done;)for(var c=e.value,i=1;i<=3;i++)r.push({damage:(c.attack.damage+c.attack.bonus)*i,numAttacks:i,weapons:[c],type:"single"})}catch(e){o.e(e)}finally{o.f()}var l,h=n.filter((function(e){return e.properties.includes("light")&&!e.properties.includes("two-handed")})),d=[],m=_(h);try{for(m.s();!(l=m.n()).done;){var f,main=l.value,v=main.attack.damage+main.attack.bonus,y=_(h);try{for(y.s();!(f=y.n()).done;){var w=f.value;if(("melee"!==main.type||"melee"===w.type||w.properties.includes("hip-fire"))&&("melee"!==w.type||"melee"===main.type||main.properties.includes("hip-fire"))&&(!d.includes("".concat(main.id,"-").concat(w.id))&&!d.includes("".concat(w.id,"-").concat(main.id)))){var k=w.attack.damage+w.attack.bonus;r.push({damage:v+k,numAttacks:2,weapons:[main,w],type:"dw"}),d.push("".concat(main.id,"-").concat(w.id))}}}catch(e){y.e(e)}finally{y.f()}}}catch(e){m.e(e)}finally{m.f()}return r.sort((function(a,b){return b.damage-a.damage})),r}},methods:{setWeaponDamage:function(e){var t=this.abilityScoreBonus(this.npc.abilityScores.str),n=this.abilityScoreBonus(this.npc.abilityScores.dex);e.attack={damage:this.averageFromDie(e.damage.dieType,e.damage.dieCount)};var r=n;return e.properties.some((function(e){return["finesse","recoil"].includes(e)}))?r=t>=n?t:n:"melee"===e.type&&(r=t),e.attack.bonus=r,e},setWeaponActions:function(){var e=this,t=this.attackOptions.filter((function(i){return e.isDamageAddable({type:"weapon",damage:i.damage,uses:5})}));0===t.length&&(t=Object(c.a)(this.attackOptions).slice(-5));var n=t.filter((function(i){return i.damage>=e.minDmg})),r=0===n.length?t.slice(0,20):n,o=this.randomValue(r);this.addDamage({type:"weapon",damage:o.damage,uses:5}),o.numAttacks>1&&this.npc.entries.actions.push({name:"Multiattack",text:this.generateMultiattackDescription(o),id:"multiattack"});var l,h=0,d=_(o.weapons);try{for(d.s();!(l=d.n()).done;){var m=l.value,f={ref:"weapon",proficient:!0,weaponId:m.id,id:"".concat(m.id,"-").concat(h)};"elcor"===this.options.species.id&&(f.mod="int"),this.npc.entries.actions.push(f),h++}}catch(e){d.e(e)}finally{d.f()}},generateMultiattackDescription:function(e){var t=this.lcName,n=["","one","two","three","four"],r=e.numAttacks>1?"s":"",text="The ".concat(t," makes");if(e.weapons.length>1)if("melee"===e.weapons[0].type&&"melee"===e.weapons[1].type)text+=" ".concat(n[e.numAttacks]," melee attack").concat(r);else if(e.weapons[0].id===e.weapons[1].id)text+=" ".concat(n[e.numAttacks]," ").concat(e.weapons[0].name," attack").concat(r,", one in each hand.");else{var o=n[e.numAttacks/2];text+=" ".concat(n[e.numAttacks]," attacks: ").concat(o," with its ").concat(e.weapons[0].name," and ").concat(o," with its ").concat(e.weapons[1].name)}else text+=" ".concat(n[e.numAttacks]," ").concat(e.weapons[0].name," attack").concat(r);return text}}};n(70);function L(e,t){var n;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return W(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return W(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var i=0,r=function(){};return{s:r,n:function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}},e:function(e){throw e},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,c=!0,l=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return c=e.done,e},e:function(e){l=!0,o=e},f:function(){try{c||null==n.return||n.return()}finally{if(l)throw o}}}}function W(e,t){(null==t||t>e.length)&&(t=e.length);for(var i=0,n=new Array(t);i<t;i++)n[i]=e[i];return n}var H={methods:{setLegendary:function(){var e,t=this;switch(this.options.damageFocus){case"powers":e=["power","weapon"],this.options.grenades&&e.push("grenade");break;case"weapons":e=["weapon","power"],this.options.grenades&&e.push("grenade");break;case"grenades":e=this.options.grenades?["grenade","weapon","power"]:["weapon","power"]}"soldier"===this.options.klass.id&&e.splice(e.indexOf("power"),1);var n,r=L(e);try{for(r.s();!(n=r.n()).done;){var o=n.value;this.attemptSetLegendary(o)}}catch(e){r.e(e)}finally{r.f()}"{}"!==JSON.stringify(this.npc.entries.legendary)&&function(){t.npc.entries.legendary.text="The ".concat(t.lcName," can take 3 legendary actions, choosing from the options below. Only one legendary action can be used at a time and only at the end of another creature's turn. The ").concat(t.lcName," regains spent legendary actions at the start of its turn.");var e=Object.keys(t.npc.entries.legendary.actions).length,n=[{id:"detect",name:"Detect",text:"The ".concat(t.lcName," makes a Wisdom (Perception) check.")},{id:"move",name:"Move",text:"The ".concat(t.lcName," moves up to its speed.")},{id:"dodge",name:"Dodge",text:"The ".concat(t.lcName," takes the Dodge action.")},{id:"hide",name:"Hide",text:"The ".concat(t.lcName," takes the Hide action.")}];["adept","vanguard","sentinel"].includes(t.options.klass.id)&&n.push({id:"barrier",name:"Barrier",text:"The ".concat(t.lcName," uses its Barrier.")}),"infiltrator"===t.options.klass.id&&n.push({id:"tac-cloak",name:"Tactical Cloak",text:"The ".concat(t.lcName," uses its Tactical Cloak.")});for(var r=[],i=0;i<3-e;i++){var o=t.randomValue(n.filter((function(i){return!r.includes(i.id)})));r.push(o.id),t.npc.entries.legendary.actions.push(o)}}()},attemptSetLegendary:function(e){if(this.calcAvgDamage(this.damage,this.legendary)<this.minDmg)for(var t=!1,i=1;i<4;i++)if(!t){var n={type:e,cost:i};if(this.isLegendaryAddable(n)){var r=void 0,text=void 0,o=void 0,c=void 0;switch(e){case"power":r="Cast a Power",text="The ".concat(this.lcName," casts one of its powers."),o="castPower";break;case"weapon":(c=this.npc.entries.actions.findIndex((function(i){return"multiattack"===i.id})))>-1?(r="Attack",text=this.npc.entries.actions[c].text):(r="Attack",text="The ".concat(this.lcName," makes one weapon attack.")),o="attack";break;case"grenade":r="Use a Grenade",text="The ".concat(this.lcName," uses one of its grenades."),o="grenade"}this.npc.entries.legendary.actions||(this.npc.entries.legendary.actions=[]),this.npc.entries.legendary.actions.push({name:r,text:text,cost:i,id:o}),this.legendary.push(n),t=!0}}}}};function G(e,t){var n;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return $(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return $(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var i=0,r=function(){};return{s:r,n:function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}},e:function(e){throw e},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,c=!0,l=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return c=e.done,e},e:function(e){l=!0,o=e},f:function(){try{c||null==n.return||n.return()}finally{if(l)throw o}}}}function $(e,t){(null==t||t>e.length)&&(t=e.length);for(var i=0,n=new Array(t);i<t;i++)n[i]=e[i];return n}var E={data:function(){return{npc:{},damage:[],legendary:[],damageTarget:1,healthBonus:0,generated:!1,percentMods:{0:[.05,.1,.15],1:[.1,.2,.3],2:[.1,.25,.5],3:[.1,.25,.5],4:[.1,.25,.5]}}},mixins:[l.a,f,{methods:{setAc:function(){this.npc.ac=10;var e=[];switch(this.options.offensiveScale){case-2:e=[3,3,2,2,1];break;case-1:e=[2,2,1,1,0];break;case 0:e=[1,1,0,0,0,-1,-1];break;case 1:e=[0,-1,-1,-2,-2];break;case 2:e=[-1,-2,-2,-3,-3]}var t=this.randomValue(e);this.npc.ac=this.options.cr.ac+t}}},{data:function(){return{trans:["l","n","c"],morality:["g","n","e"]}},methods:{setAlignment:function(){var e=this.randomValue(this.morality),t=this.randomValue(this.trans);this.npc.alignment="".concat(t).concat(e)}}},h.a,y,k,V,{data:function(){return{baseShields:{0:{shields:[0,0,0,5,5],regen:[0]},1:{shields:[0,0,5,5,5],regen:[0,0,0,5,5]},2:{shields:[5,5,5,10,10],regen:[0,0,5,5,10]},3:{shields:[5,10,10,10,15],regen:[0,5,5,5,10]},4:{shields:[10,15,15,20],regen:[0,5,10]},5:{shields:[15,20,20],regen:[5,10]},6:{shields:[20,20,20,25,25],regen:[5,10,15]},7:{shields:[20,20,25,25,30],regen:[10,10,15]},8:{shields:[20,25,30],regen:[10,15]},9:{shields:[25,30],regen:[10,15]},10:{shields:[30],regen:[15]}},defensivePercentiles:[.5,.25,.1,.25,.5]}},computed:{speciesDieType:function(){return"volus"===this.options.species.id?6:8}},methods:{setHp:function(){this.npc.shields=!1;var e=0,t=this.baseShields[this.defensiveCrMeta],n=this.randomValue(t.shields);if(e+=n,n>0){var r=this.randomValue(t.regen.filter((function(e){return e<=n})));e+=r,this.isHpBonusAddable(e)&&(this.npc.shields={capacity:n,regen:r},this.healthBonus+=e)}for(var o=0,c=0;c<this.minHp;)if(o++,(c=this.getAverage(o))>this.minHp&&this.options.offensiveScale<0)for(;c<this.maxHp&&(o++,!((c=this.getAverage(o))>this.maxHp)););this.npc.hp={dieCount:o,dieType:this.speciesDieType}},getAverage:function(e){return e*((this.speciesDieType+1)/2)+e*this.abilityScoreBonus(this.npc.abilityScores.con)}}},S,x,H,{methods:{setName:function(){this.npc.name="".concat(this.options.species.name," ").concat(this.options.klass.name)}}},o.a,C,{methods:{setSenses:function(){var e=!1;switch(this.options.species.id){case"prothean":e={truesight:30};break;case"quarian":case"vorcha":3===this.randomValue([1,2,3])&&(e={darkvision:60})}this.npc.senses=e}}},A,{methods:{setSpeed:function(){var e=30;switch(this.options.species.id){case"volus":e=25;break;case"elcor":e=20;break;case"quarian":e=3===this.randomValue([1,2,3])?35:30;break;case"drell":e=35;break;case"vorcha":e=40;break;default:e=30}this.npc.speed={walk:e}}}},I,{methods:{setType:function(){this.npc.type="geth"===this.options.species.id?"synthetic":"organic"}}},j,P],computed:{klass:function(){return this.$store.getters.getItem("classes",this.options.klass.id)},progression:function(){return this.klass.progression.columns},crMeta:function(){return Math.floor(this.options.cr.normalized/8)},defensiveCrMeta:function(){var e=-1*this.options.offensiveScale;return this.crMeta+e<0?0:this.crMeta+e},percentileMod:function(){return 0===this.options.offensiveScale?this.percentMods[this.crMeta][0]:this.options.offensiveScale%2==0?this.percentMods[this.crMeta][2]:this.percentMods[this.crMeta][1]},minHp:function(){var e=this.options.cr.hp,t=this.options.offensiveScale>=0?this.percentileMod:0;return Math.max(Math.floor(e-e*t-this.healthBonus),5)},maxHp:function(){var e=this.options.cr.hp,t=this.options.offensiveScale<=0?this.percentileMod:0;return Math.ceil(e+e*t-this.healthBonus)},minDmg:function(){var e=this.options.cr.damage,t=this.options.offensiveScale<=0?this.percentileMod:0;return Math.floor(e-e*t)},maxDmg:function(){var e=this.options.cr.damage,t=this.options.offensiveScale>=0?this.percentileMod:0;return Math.floor(e+e*t)},metaLevel:function(){var e=Math.floor((this.options.cr.normalized+this.options.cr.normalized/3)/20*10);return e>20?20:e<1?1:e},metaTier:function(){return this.metaLevel<5?1:this.metaLevel<11?2:this.metaLevel<17?3:4},lcName:function(){return this.npc.name.toLowerCase()}},methods:{addDamage:function(e){var t=JSON.parse(JSON.stringify(this.damage));t.push(e),this.damage=t},isDamageAddable:function(e){var t=JSON.parse(JSON.stringify(this.damage));return t.push(e),this.calcAvgDamage(t,this.legendary)<=this.maxDmg},isHpBonusAddable:function(e){return this.abilityScoreBonus(this.npc.abilityScores.con)+5+this.healthBonus+e<=this.maxHp},isLegendaryAddable:function(e){var t=JSON.parse(JSON.stringify(this.legendary));return t.push(e),this.calcAvgDamage(this.damage,t)<=this.damageTarget+this.damageTarget/6},calcAvgDamage:function(e,t){var n,r=JSON.parse(JSON.stringify(e)),o=0,c=0,l=0,h=G(r.filter((function(i){return"bonus"!==i.type&&i.damage>0})).sort((function(a,b){return a.damage>b.damage?-1:1})));try{for(h.s();!(n=h.n()).done;){var d=n.value;c<5&&(c+=d.uses,l+=d.damage*d.uses)}}catch(e){h.e(e)}finally{h.f()}o+=l>0&&c>0?Math.ceil(l/c):0;var m=0,f=0;if(t){var v,y=G(t);try{var w=function(){var e,t=v.value,n=G(r.filter((function(i){return i.type===t.type&&i.damage>0})));try{for(n.s();!(e=n.n()).done;){var o=e.value;m+=o.damage*o.uses,f+=Math.ceil(o.uses/(4-t.cost))}}catch(e){n.e(e)}finally{n.f()}};for(y.s();!(v=y.n()).done;)w()}catch(e){y.e(e)}finally{y.f()}}o+=m>0&&f>0?Math.ceil(m/f):0;var k,S=0,x=0,D=G(r.filter((function(i){return"bonus"===i.type&&i.damage>0})));try{for(D.s();!(k=D.n()).done;){var T=k.value;S+=T.damage*T.uses,x+=T.uses}}catch(e){D.e(e)}finally{D.f()}return o+=S>0&&x>0?Math.ceil(S/x):0,Math.ceil(o)},calcDc:function(e){return 8+this.npc.profBonus+this.abilityScoreBonus(this.npc.abilityScores[e])},setDamageBudget:function(){var e=this.options.cr.damage,t=e-Math.floor(this.percentileMod*e),n=e+Math.ceil(this.percentileMod*e);if(0===this.options.offensiveScale){var r=n-t;this.damageTarget=this.randomValue(Object(c.a)(Array(r).keys()).map((function(i){return i+t})))}else this.damageTarget=this.options.offensiveScale>0?n:t},reset:function(){this.damageTarget=1,this.damage=[],this.legendary=[],this.healthBonus=0},setDamageByFocus:function(){switch(this.options.damageFocus){case"powers":this.setPowercasting(),this.setCombatPowers(),this.setWeaponActions(),this.setGrenades();break;case"weapons":this.setWeaponActions(),this.setPowercasting(),this.setCombatPowers(),this.setGrenades();break;case"grenades":this.setGrenades(),this.setPowercasting(),this.setCombatPowers(),this.setWeaponActions();break;case"heavy weapons":this.setPowercasting(),this.setCombatPowers(),this.setWeaponActions(),this.setGrenades()}},generateGrunt:function(){this.reset(),this.setDamageBudget(),this.npc.image=!1,this.npc.unit="archetype",this.setName(),this.setId(),this.setType(),this.setAlignment(),this.setAc(),this.setIrvs(),this.setSavingThrows(),this.setSenses(),this.npc.size="volus"===this.options.species.id?"small":"medium",this.setSkills(),this.setSpeed(),this.npc.profBonus=this.options.cr.profBonus,this.setAbilityScores(),this.npc.entries={features:[],actions:[],legendary:{},reactions:[]},this.setTraits(),this.setFeatures(),this.setDamageByFocus(),this.setHp(),this.npc.cr=this.options.cr.id,this.setLegendary();for(var e=0,t=["features","actions","legendary","reactions"];e<t.length;e++){var n=t[e];["{}","[]"].includes(JSON.stringify(this.npc.entries[n]))&&delete this.npc.entries[n]}this.generated=!0}}},R={mixins:[o.a,E],asyncData:function(e){return Object(r.a)(regeneratorRuntime.mark((function t(){var n,r;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=e.store,r=e.i18n,n.dispatch("SET_META",{title:r.t("npc_generator_title"),description:r.t("meta.npc_generator")}),t.next=4,n.dispatch("FETCH_LOTS",["classes","species","npc-stats","powers","weapons","gear","skills"]);case 4:case"end":return t.stop()}}),t)})))()},data:function(){return{selectedCr:null,selectedSp:null,selectedCl:null,selectedOffensiveScale:0,selectedGrenades:!0,selectedTraits:!0,selectedDamageFocus:null,options:{cr:null,klass:null,species:null,offensiveScale:0,grenades:!0,traits:!0,damageFocus:null},scaleIndex:[-2,-1,0,1,2],offensiveScaleColors:["blue-grey lighten-1","blue-grey lighten-1","blue-grey lighten-1","red darken-3","red darken-4"],offensiveScaleTrackColors:["blue darken-4","blue darken-3","blue-grey lighten-1","blue-grey lighten-1","blue-grey lighten-1"],offensiveScaleThumbColors:["blue darken-4","blue darken-3","blue-grey lighten-1","red darken-3","red darken-4"],damageFocusOptions:["powers","weapons","grenades"]}},computed:{crs:function(){return this.$store.getters.getData("npc-stats")},classes:function(){return this.$store.getters.getData("classes")},species:function(){return this.$store.getters.getData("species")},spells:function(){return this.$store.getters.getData("powers")},weapons:function(){return this.$store.getters.getData("weapons")},grenades:function(){return this.$store.getters.getData("gear").filter((function(g){return"grenade"===g.type}))},sliderColor:function(){return this.offensiveScaleColors[this.scaleIndex.indexOf(this.selectedOffensiveScale)]},sliderTrackColor:function(){return this.offensiveScaleTrackColors[this.scaleIndex.indexOf(this.selectedOffensiveScale)]},sliderThumbColor:function(){return this.offensiveScaleThumbColors[this.scaleIndex.indexOf(this.selectedOffensiveScale)]}},methods:{damageFocusAdjustments:function(){"grenades"===this.selectedDamageFocus&&!1===this.selectedGrenades&&(this.selectedGrenades=!0)},generate:function(){var e=this;this.options={cr:null===this.selectedCr?this.randomValue(this.crs):this.selectedCr,klass:null===this.selectedCl?this.randomValue(this.classes):this.selectedCl,species:null===this.selectedSp?this.randomValue(this.species):this.selectedSp,offensiveScale:this.selectedOffensiveScale,grenades:this.selectedGrenades,traits:this.selectedTraits,damageFocus:null===this.selectedDamageFocus?this.randomValue(this.damageFocusOptions):this.selectedDamageFocus},this.generated=!1,this.npc={},setTimeout((function(){return e.generateGrunt()}),300)}}},J=n(0),z=n(3),U=n.n(z),X=n(200),K=n(307),Y=n(5),Z=n(992),Q=n(990),ee=n(995),te=n(83),ie=n(1010),ne=n(1005),component=Object(J.a)(R,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-container",[n("me-page-title"),e._v(" "),n("p",[e._v("\n    This generator creates disposable NPCs based on the Mass Effect archetypes. Your options for NPC generation are:\n  ")]),e._v(" "),n("ul",{staticClass:"text-body-2"},[n("li",[e._v("Offensive vs Defensive: Offensive increase damage per round, but reduces AC, Shields, and Hit Points. Defensive does the opposite.")]),e._v(" "),n("li",[e._v("Damage Priority: When randomly generating attack, the generator will attempt to have the highest damage source be the selected type, either powers, weapons, or grenades.")]),e._v(" "),n("li",[e._v("\n      Grenade Toggle: Whether or not you want the NPC to use grenades\n    ")]),e._v(" "),n("li",[e._v("Species Traits: Whether or not you want the NPC to gain any special species traits.")])]),e._v(" "),n("v-card",{staticClass:"mt-8"},[n("v-card-text",[n("v-row",[n("v-col",{attrs:{cols:"12",sm:"4"}},[n("v-select",{attrs:{items:e.crs,label:"Select a Challenge Rating","item-text":"cr","item-value":"cr","return-object":"","single-line":"","menu-props":"bottom",hint:"Challenge Rating","persistent-hint":"",clearable:""},model:{value:e.selectedCr,callback:function(t){e.selectedCr=t},expression:"selectedCr"}})],1),e._v(" "),n("v-col",{attrs:{cols:"12",sm:"4"}},[n("v-select",{attrs:{items:e.classes,label:"Select a Class","item-text":"name","item-value":"id","return-object":"","single-line":"","menu-props":"bottom",hint:"Class","persistent-hint":"",clearable:""},model:{value:e.selectedCl,callback:function(t){e.selectedCl=t},expression:"selectedCl"}})],1),e._v(" "),n("v-col",{attrs:{cols:"12",sm:"4"}},[n("v-select",{attrs:{items:e.species,label:"Select a Species","item-text":"name","item-value":"id","return-object":"","single-line":"","menu-props":"bottom",hint:"Species","persistent-hint":"",clearable:""},model:{value:e.selectedSp,callback:function(t){e.selectedSp=t},expression:"selectedSp"}})],1)],1),e._v(" "),n("v-row",[n("v-col",{attrs:{md:"8","offset-md":"2",lg:"6","offset-lg":"3"}},[n("v-slider",{attrs:{min:"-2",max:"2",color:e.sliderColor,"track-color":e.sliderTrackColor,"thumb-color":e.sliderThumbColor},scopedSlots:e._u([{key:"prepend",fn:function(){return[n("span",{staticClass:"body-2"},[e._v("\n                More Defensive\n              ")])]},proxy:!0},{key:"append",fn:function(){return[n("span",{staticClass:"body-2"},[e._v("\n                More Offensive\n              ")])]},proxy:!0}]),model:{value:e.selectedOffensiveScale,callback:function(t){e.selectedOffensiveScale=t},expression:"selectedOffensiveScale"}})],1)],1),e._v(" "),n("v-row",[n("v-col",{attrs:{cols:"12",sm:"4"}},[n("v-select",{attrs:{items:e.damageFocusOptions,label:"Damage Priority","single-line":"","menu-props":"bottom",clearable:""},on:{change:function(t){return e.damageFocusAdjustments()}},model:{value:e.selectedDamageFocus,callback:function(t){e.selectedDamageFocus=t},expression:"selectedDamageFocus"}})],1),e._v(" "),n("v-col",{attrs:{cols:"12",sm:"4"}},[n("v-switch",{staticClass:"ml-sm-6 ml-md-12",attrs:{dense:"",label:"Grenades?"},model:{value:e.selectedGrenades,callback:function(t){e.selectedGrenades=t},expression:"selectedGrenades"}})],1),e._v(" "),n("v-col",{attrs:{cols:"12",sm:"4"}},[n("v-switch",{staticClass:"ml-md-12",attrs:{dense:"",label:"Species Traits?"},model:{value:e.selectedTraits,callback:function(t){e.selectedTraits=t},expression:"selectedTraits"}})],1)],1)],1),e._v(" "),n("v-card-actions",[n("v-btn",{attrs:{block:""},on:{click:function(t){return e.generate()}}},[e._v("\n        Generate\n      ")])],1)],1),e._v(" "),n("v-row",[n("v-col",{staticClass:"mt-8",attrs:{sm:"10",lg:"8","offset-sm":"1","offset-lg":"2"}},[e.generated?n("v-card",[n("v-card-text",[n("me-npc-stat-block",{attrs:{stats:e.npc,title:!0}})],1),e._v(" "),n("v-card-actions",[n("me-bookmark",{attrs:{item:e.npc,type:"bestiary"}})],1)],1):e._e()],1)],1)],1)}),[],!1,null,null,null);t.default=component.exports;U()(component,{VBtn:X.a,VCard:K.a,VCardActions:Y.a,VCardText:Y.c,VCol:Z.a,VContainer:Q.a,VRow:ee.a,VSelect:te.a,VSlider:ie.a,VSwitch:ne.a})}}]);